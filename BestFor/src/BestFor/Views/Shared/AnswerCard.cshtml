@model BestFor.Dto.AnswerDto
@using BestFor.Services
@* Inject the service that allows searching for localized strings *@
@inject BestFor.Services.Services.IResourcesService resourcesService
@*
    Culture is placed into view bag by action filter.
    This template shows content of the answer with the link to content.
    <a href="/ru-ru/best-bet-for-me-is-hello">best bet for me is hello</a>

    TODO: Need to render this into something that does not wrap
*@
@{
    if (Model != null)
    {
        // Link to flagging.TODO how to do this in tag helpers?
        // Get the localized word flag
        var strings = resourcesService.GetCommonStrings(this.ViewBag.BestForCulture);
        string flagString = strings.FlagUpper;
        string voteString = strings.VoteUpper;
        string describeString = strings.DescribeUpper;
        string moreString = strings.MoreUpper;
        // TODO make this into something beautiful *@
        @* Panel best-panel-shadow is our style *@
        <div class="panel panel-default best-panel-shadow">
            @* Header *@
            <div class="panel-heading">
                <yakor y-culture="@this.ViewBag.BestForCulture" y-controller="Flag" y-action="FlagAnswer"
                    y-querystring="@new { answerId = Model.Id }">@flagString</yakor>
                <yakor y-culture="@this.ViewBag.BestForCulture" y-controller="AnswerAction" y-action="Vote"
                       y-querystring="@new { answerId = Model.Id }">@voteString</yakor>
                <yakor y-culture="@this.ViewBag.BestForCulture" y-controller="AnswerAction" y-action="AddDescription"
                       y-querystring="@new { answerId = Model.Id }">@describeString</yakor>
            </div>
            @* Content *@
            <div class="panel-body">
                <a href="@LinkingHelper.ConvertAnswerToUrlWithCulture(this.ViewBag.BestForCulture,
                            resourcesService.GetCommonStrings(this.ViewBag.BestForCulture), Model)">
                    @LinkingHelper.ConvertAnswerToText(resourcesService.GetCommonStrings(this.ViewBag.BestForCulture), Model)
                </a>
            </div>
            <div class="panel-footer">
                @* This is an attempt to move the link to the right from center. Can not quite right align. *@
                <div class="row">
                    <div class="col-md-offset-8 col-md-4">
                        <a href="@LinkingHelper.ConvertAnswerToUrlWithCulture(this.ViewBag.BestForCulture,
                            resourcesService.GetCommonStrings(this.ViewBag.BestForCulture), Model)">@moreString</a>
                    </div>
                </div>
            </div>
        </div>
    }
}